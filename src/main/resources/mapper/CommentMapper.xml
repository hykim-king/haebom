<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pcwk.ehr.comment.CommentMapper">

    <!-- 댓글 등록 -->
    <insert id="doSave" parameterType="CommentVO">
        INSERT INTO cmt (
            cmt_no,
            cmt_cn,
            cmt_starng,
            cmt_clsf,
            cmt_hide_yn,
            trip_course_no,
            cmt_reg,
            reg_no
        ) VALUES (
            SEQ_CMT_NO.NEXTVAL,
            #{cmtCn},
            #{cmtStarng},
            #{cmtClsf},
            #{cmtHideYn},
            #{tripCourseNo},
            SYSDATE,
            #{regNo}
        )
    </insert>

    <!-- 댓글 삭제 -->
    <delete id="doDelete" parameterType="CommentVO">
        DELETE FROM cmt
        WHERE cmt_no = #{cmtNo}
    </delete>

    <!-- 전체 삭제 -->
    <delete id="deleteAll">
        DELETE FROM cmt
    </delete>

    <!-- 건수 조회 -->
    <select id="getCount" resultType="int">
        SELECT COUNT(*) FROM cmt
    </select>

    <!-- 단건 조회 -->
    <select id="doSelectOne" parameterType="CommentVO" resultType="CommentVO">
        SELECT
            cmt_no,
            cmt_cn,
            cmt_starng,
            cmt_clsf,
            cmt_hide_yn,
            trip_course_no,
            cmt_reg,
            cmt_mod,
            reg_no,
            mod_no
        FROM cmt
        WHERE cmt_no = #{cmtNo}
    </select>

</mapper>
